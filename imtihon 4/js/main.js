const boxCards=document.querySelector(".product__cards"),elCards=document.querySelector(".js-cards"),btn=document.querySelector(".product__btn"),product__list=document.querySelector(".product__list"),ul=document.createElement("ul"),All=document.querySelector(".product__list__all"),elBasketNum=document.querySelector(".js-number");let category=[],parrentArr=[];All.addEventListener("click",e=>{(category=[]).push(""),getData()});try{function getData(){fetch(`https://fakestoreapi.com/products/${category.toString()}`).then(e=>e.json()).then(e=>renderArr(e))}getData(),fetch("https://fakestoreapi.com/products/categories").then(e=>e.json()).then(e=>{e.map(e=>{const t=document.createElement("li"),c=document.createElement("button");c.textContent=e,t.append(c),c.addEventListener("click",e=>{(category=[]).push(`category/${e.target.textContent}`),getData()}),product__list.append(t)})})}catch(e){console.error(e)}function renderArr(e){localStorage.setItem("data",JSON.stringify(e)),elCards.innerHTML="";for(let t=0;t<e.length;t++){const c=e[t];let a=document.createElement("li");a.classList.add("product__cards-item"),a.id=c.id;let r=document.createElement("div");r.classList.add("product__hover");let n=document.createElement("span");n.classList.add("product__circle");let d=document.createElement("span");d.classList.add("product__circle");let s=document.createElement("img");s.className="product__basket",s.src="";let l=document.createElement("img");l.className="product__basket",l.src="../img/cart-oncheck.png";let o=document.createElement("img");o.className="product__basket",o.src="../img/cart-oncheck.png";let m=document.createElement("img");m.className="product__basket check",m.src="../img/cart-check.png",n.addEventListener("click",()=>{s.classList.toggle("check"),l.classList.toggle("check")}),d.addEventListener("click",()=>{o.classList.toggle("check"),m.classList.toggle("check")}),d.addEventListener("click",e=>{if("product__basket check"==o.className){let t=e.target.parentNode.parentNode.parentNode.id;parrentArr.push(t),localStorage.setItem("id",JSON.stringify(parrentArr)),elBasketNum.textContent=parrentArr.length}else parrentArr.length--,elBasketNum.textContent=parrentArr.length});let p=document.createElement("img");p.classList.add("product__img"),p.src=c.image;let i=document.createElement("div");i.classList.add("product__content");let u=document.createElement("p");u.textContent=c.title,u.classList.add("product__text");let g=document.createElement("div");g.classList.add("product__star");let _=document.createElement("p");_.className=`fa fa-star ${Math.round(+c.rating.rate)>=1?"checked":""}`;let h=document.createElement("p");h.className=`fa fa-star ${Math.round(+c.rating.rate)>=2?"checked":""}`;let E=document.createElement("p");E.className=`fa fa-star ${Math.round(+c.rating.rate)>=3?"checked":""}`;let k=document.createElement("p");k.className=`fa fa-star ${Math.round(+c.rating.rate)>=4?"checked":""}`;let f=document.createElement("p");f.className=`fa fa-star ${Math.round(+c.rating.rate)>=5?"checked":""}`;let y=document.createElement("div"),L=document.createElement("span");L.textContent=(.76*+c.price).toFixed(2),L.classList.add("product__price");let N=document.createElement("del");N.textContent=`$${c.price}`,N.classList.add("product__price-del");let C=document.createElement("span");C.textContent="24% Off",C.classList.add("product__percentage"),y.append(L,N,C),g.append(_,h,E,k,f),i.append(u,g,y),n.append(s,l),d.append(o,m),r.append(n,d),a.append(r,p,i),elCards.appendChild(a)}}function myFunction(){var e,t,c,a;for(e=document.querySelector(".product__search").value.toUpperCase(),t=document.getElementById("myUL").getElementsByTagName("li"),a=0;a<t.length;a++)((c=t[a].getElementsByTagName("p")[0]).textContent||c.innerText).toUpperCase().indexOf(e)>-1?t[a].style.display="":t[a].style.display="none"}btn.addEventListener("click",()=>{myFunction()});